<md-dialog aria-label="List dialog"
	ng-controller="MeteringPointController as vm">
	<md-dialog-content>

		<form name="meteringPointForm">
			<md-stepper id="meteringPointStepper"
				md-mobile-step-text="$ctrl.isMobileStepText"
				md-vertical="$ctrl.isVertical" md-linear="$ctrl.isLinear"
				md-alternative="$ctrl.isAlternative">
				
				<md-step md-label="Messstelle beschreiben">
					<md-step-body>
						<h3>Welche Messstelle möchten Sie beschreiben?</h3>
						<md-input-container>
							<label class="md-no-float">Zählpunktbezeichnung</label>
							<input ng-model="vm.meteringPoint.meteringPointDescription" required md-minlength="1" type="text">
						</md-input-container>
						<md-input-container>
							<label class="md-no-float">Interne Bezeichnung (Optional)</label>
							<input ng-model="vm.meteringPoint.internalDescription" type="text">
						</md-input-container>
					</md-step-body>
					<md-step-actions layout="row" layout-align="space-between">
						<md-button class="md-primary" ng-click="closeDialog()">Abbrechen</md-button>
						<md-button class="md-primary md-raised" ng-click="vm.forward()">Weiter</md-button>
					</md-step-actions>
				</md-step>
				
				<md-step md-label="Einbauort auswählen">
					<md-step-body>
						<h3>Wo befindet sich die Messstelle?</h3>
						<md-content>
							<label class="md-no-float">Einbauort</label>
							<md-autocomplete
					          ng-disabled="vm.isDisabled"
					          md-no-cache="vm.noCache"
					          md-selected-item="vm.selectedItem"
					          md-search-text-change="vm.searchTextChange(vm.searchText)"
					          md-search-text="vm.searchText"
					          md-selected-item-change="vm.selectedItemChange(item)"
					          md-items="item in vm.querySearch(vm.searchText)"
					          md-item-text="item.display"
					          md-min-length="2"
					          placeholder="">
					        <md-item-template>
					        	<span md-highlight-text="vm.searchText" md-highlight-flags="^i">{{item.display}}</span>
					        </md-item-template>
					        <md-not-found>
								No states matching "{{vm.searchText}}" were found.
								<a ng-click="vm.newState(vm.searchText)">Create a new one!</a>
					        </md-not-found>
					      </md-autocomplete>						
						</md-content>
						<md-input-container>
							<label class="md-no-float">Gebäude (Optional)</label>
							<input ng-model="vm.meteringPoint.additionalAddressInformation.building" type="text">
						</md-input-container>
						<md-input-container>
							<label class="md-no-float">Stockwerk (Optional)</label>
							<input ng-model="vm.meteringPoint.additionalAddressInformation.floor" type="text">
						</md-input-container>
						<md-input-container>
							<label class="md-no-float">Raum (Optional)</label>
							<input ng-model="vm.meteringPoint.additionalAddressInformation.room" type="text">
						</md-input-container>
					</md-step-body>
					<md-step-actions layout="row" layout-align="space-between">
						<md-button class="md-primary" ng-click="closeDialog()">Abbrechen</md-button>
						<md-button-container>
							<md-button class="md-primary" ng-click="vm.back()">Zurück</md-button>
							<md-button class="md-primary md-raised" ng-click="vm.forward()">Weiter</md-button>
						</md-button-container>
					</md-step-actions>
				</md-step>
				
				
				<md-step md-label="Mit Gateway verbinden">
					<md-step-body>
						<h3>Mit welchem Gateway soll die Messstelle verbunden werden?</h3>
					</md-step-body>
					<md-step-actions layout="row" layout-align="space-between">
						<md-button class="md-primary" ng-click="closeDialog()">Abbrechen</md-button>
						<md-button-container>
							<md-button class="md-primary" ng-click="vm.back()">Zurück</md-button>
							<md-button class="md-primary md-raised" ng-click="vm.forward()">Weiter</md-button>
						</md-button-container>
					</md-step-actions>
				</md-step>
				
				
				<md-step md-label="Eingaben prüfen">
					<md-step-body>
						<h3>Folgende Messstelle anlegen?</h3>
						<h4>Messstelle</h4>
						<div layout="row">
						  <div flex>
						  	<div layout="row">
						  		<div flex>Zählpunktbez.:</div>
						  		<div flex>{{ vm.meteringPoint.meteringPointDescription }}</div>
						  	</div>
						  	<div layout="row" class="margin-top">
						  		<div flex>Interne Bezeichnung:</div>
						  		<div flex>{{ vm.meteringPoint.internalDescription }}</div>
						  	</div>
						  </div>
						  <div flex>
						  		<ui-gmap-google-map center='vm.map.center' zoom='vm.map.zoom'></ui-gmap-google-map>
						  </div>
						</div>
					</md-step-body>
					<md-step-actions layout="row" layout-align="space-between">
						<md-button class="md-primary" ng-click="closeDialog()">Abbrechen</md-button>
						<md-button-container>
							<md-button class="md-primary" ng-click="vm.back()">Zurück</md-button>
							<md-button class="md-primary md-raised" ng-click="vm.createMeteringPoint()">Anlegen</md-button>
						</md-button-container>
					</md-step-actions>
				</md-step>
				
		
				
			</md-stepper>
		</form>
	</md-dialog-content>
</md-dialog>